_GreatDIY 프로토콜의 Tier·수수료 할인·저작자 보상 증대를 위한 최적화 설계 (최종 선택안)_

---

# **1. 개요**

**G8DStaking**은  
사용자와 저작자가 자신의 **G8D 토큰을 일정 기간 스테이킹**함으로써  
GreatDIY 서비스 전반의 혜택을 얻는 핵심 인센티브 시스템이다.

스테이킹을 통해 결정되는 요소:

- **Marketplace 노출 우선순위 가중치**
- **Follow 가능한 전략 수량 증가**
- **자동매매 수수료 할인**
- **저작자의 저작료 비율 상승 (기본 10% → 최대 30%)**

Tier는 “스테이킹 잔액 × 최소 보유기간 충족 여부”로 산출되며,  
정산(Settlement)에서는 스냅샷을 사용하여 조작을 방지한다.

---

# **2. 토큰 형태 및 스테이킹 방식

GreatDIY는 다음 원칙을 채택한다:

### ✔ **G8D를 그대로 스테이킹한다 (래핑 토큰 없음)**

이 방식이 최적화되는 이유:

- UX 단순화 (사용자 입장에서 클릭 수 최소화)
- Tokenomics 복잡도 감소
- cross-chain/wrapped-token 관리 리스크 없음
- Tier 계산이 명확하고 안정적

따라서 G8DStaking은 **pure ERC20 → staking vault** 구조로 운영된다.

---

# **3. Tier 시스템 

### 3-1. 기본 Tier 구조

Tier는 스테이킹 수량으로 결정되며 기본 수수료는 주문 사이즈의 0.2% 이다. 수수료 할인을 20% 받을 경우, 수수료는 주문 사이즈의 0.16%가 되는 구조이다. 또한 저작료는 수수료의 10%가 기본이며 저작료 증가율이 100%인 경우, 수수료는 20%가 되는 구조이다.

| Tier | 최소 스테이킹   | 수수료 할인 | 팔로우 쿼타 | 저작료 증가 |
| ---- | --------- | ------ | ------ | ------ |
| T0   | 0         | 없음     | 1개     | 0%     |
| T1   | 5,000     | 10%    | 3개     | +5%    |
| T2   | 20,000    | 20%    | 10개    | +10%   |
| T3   | 50,000    | 30%    | 25개    | +25%   |
| T4   | 200,000   | 40%    | 50개    | +50%   |
| T5   | 1,000,000 | 50%    | 100개   | +100%  |

스테이킹량 기준 Tier 계산은 Staking 컨트랙트 내부에서 결정된다.

---

# **4. Settlement Snapshot 정책 (필수)**

GreatDIY는 Settlement 구조상  
**정산 생성 시점의 Tier 상태를 스냅샷으로 저장**한다.

- `userTierSnapshot`
- `authorTierSnapshot`

이 로직이 필요한 이유:

- 결제 직전 Tier를 조작해 할인/저작료를 바꾸는 꼼수 차단
- 실제 기여도 기반 보상
- 자동매매 로직·정산 로직의 일관성 확보

**Snapshot은 Settlement 생성 시에만 결정되며 이후 변동되지 않는다.**

---

# **5. 스테이킹 정책 **

GreatDIY는 두 가지 핵심 정책을 결합한다:

---

## **5-1. 최소 보유기간(Minimum Lock Period)**

- 기본 15일
- 스테이킹 직후 즉시 언스테이킹 요청 불가
- Tier의 “유효성” 평가에 필수

### 이유:

- 하루만 스테이킹하고 즉시 Tier를 높이는 Pump 방지
- Settlement Snapshot 시점의 Tier를 공정하게 반영

---

## **5-2. 언스테이킹 쿨다운(Cooldown Period)**

- 사용자가 언스테이킹 요청을 하면  
    즉시 출금되지 않고 **예: 7일 대기 후 withdraw 가능**


### 이유:

- Tier Pumping → 정산 직전 Tier Boost → 바로 withdraw 같은 조작을 완전히 차단
- 안정적으로 Tier 기반 UX를 유지

---

# **6. 언스테이킹 플로우

### 6-1. 스테이킹

`stake(amount)`

- G8D → StakingVault로 이동
- stakedBalance 증가
- “최소 보유기간 타이머”가 시작됨

---

### 6-2. 언스테이킹 요청

`requestUnstake(amount)`

전제 조건:

- 최소 보유기간이 지나야 함
- 지나지 않은 경우 → revert

요청 이후:

- `cooldownStart[msg.sender] = block.timestamp`
- 쿨다운 시작
- 즉시 출금은 불가

---

### 6-3. 실제 출금

`withdraw()`

조건:

- block.timestamp ≥ cooldownStart + cooldownPeriod
- 이 시점에만 출금 가능

결과:

- stakedBalance 감소
- 해당 amount의 G8D를 사용자 지갑으로 반환

---

# **7. Tier 계산 로직**

스테이킹 수량 기반:

`tierOf(address user)`

SettlementManager는 Settlement 생성 시 다음을 수행:

1. `userTierSnapshot = Staking.tierOf(user)`
2. `authorTierSnapshot = Staking.tierOf(author)`
3. Settlement 구조체에 기록

이후 Tier 변경은 Settlement에 영향을 주지 않는다.

---

# **8. Staking Contract 데이터 구조 (최종 선택 설계)**

`mapping(address => uint256) public stakedBalance; mapping(address => uint256) public cooldownStart; mapping(address => uint256) public stakeTimestamp;`

- `stakeTimestamp`  
    → 최소 보유기간 충족 여부 판단
- `cooldownStart`  
    → 언스테이킹 대기 타이머 기록
- `stakedBalance`  
    → Tier 레벨 계산에 직접 활용

---

# **9. 프로토콜 전체와의 연결**

### 사용자

- 더 많은 전략 사용 가능
- 자동매매 수수료 할인
- 내 전략들의 실행 비용 절감

### 저작자

- Marketplace 상위 노출
- 저작료 상승
- 전략 신뢰도 강화

### 프로토콜 전체 효과

- 자연스러운 G8D 수요 증가
- 외부에서 구매해 스테이킹 → 토큰 락업률 상승
- Tier Snapshot 기반 Settlement 구조와 결합해 매출과 토큰 요구량 모두 증가
- BuybackBurn 모델과 함께 전체 토큰 경제가 선순환

---

# **10. 요약 (최종)**

- **G8D를 그대로 스테이킹** (복잡한 wToken 없음)
- **최소 보유기간 15일 + 언스테이킹 쿨다운 7일**
- **Tier는 Settlement 생성 시 Snapshot**
- **Tier 관련 혜택: 화면 노출, 수수료 할인, Follow Quota, 저작료 비율**
- 조작 방지·UX 단순화·토큰경제 안정성을 모두 달성
- GreatDIY 경제 시스템 안에서 G8D 수요를 자연스럽게 형성하는 인센티브 설계의 중심 모듈