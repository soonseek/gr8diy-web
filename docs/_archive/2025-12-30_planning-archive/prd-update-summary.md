# PRD 최종 수정 요약 (Phase 4)

## 1. 개요

Phase 3 작업(05-blockchain, 08-admin) 완료 후, PRD에 반영할 변경사항을 정리합니다.

---

## 2. 주요 변경사항

### 2.1 블록체인 프로토콜 추가

**新增**: 05-blockchain 섹션 전체

| 항목 | 내용 |
|------|------|
| **블록체인** | Monad L1 (고성능 EVM 호환 체인) |
| **정산 자산** | USDT0 (Monad L1 ERC20) |
| **네이티브 토큰** | **G8D** (이름 변경: G8B → G8D) |
| **스마트 컨트랙트** | 9개 컨트랙트 (AccessControl, StrategyRegistry, FollowRegistry, DecisionHistory, SettlementManager, FeeDistributor, BuybackTreasury, G8DToken, G8DStaking) |

**PRD 수정 필요 섹션**:
- 1.5 해결책 → 온체인 검증 내용 추가
- 2.4 탈중앙화 → 블록체인 프로토콜 상세 추가

### 2.2 관리자 기능 추가

**新增**: 08-admin 섹션 전체

| 기능 | 설명 |
|------|------|
| **사용자 관리** | 가입 승인(개발 서버), 활성/비활성, 권한 변경 |
| **전략 검토** | 검토 대기 목록, 승인/거절, 비공개 처리 |
| **크레딧 관리** | 충전, 환불, 내역 조회 |
| **저작권료 정산** | 월별 집계, 지급 처리 |
| **시스템 모니터링** | 상태 확인, 통계 조회 |

**PRD 수정 필요 섹션**:
- 2. 핵심 기능 → 관리자 기능 섹션 추가

### 2.3 오프체인 크레딧 시스템

**변경**: 정산 방식

| 구분 | 내용 |
|------|------|
| **기본 모드** | 크레딧 기반 오프체인 정산 |
| **블록체인 정산** | 선택적 (BLOCKCHAIN_ENABLED=true) |
| **저작권료** | 월별 관리자 수동 정산 |

**PRD 수정 필요 섹션**:
- 2.4 탈중앙화 → 오프체인/온체인 하이브리드 명시

### 2.4 블록체인 비활성화 모드

**新增**: 환경 변수로 블록체인 완전 비활성화

```bash
BLOCKCHAIN_ENABLED=false  # 블록체인 사용 안 함
```

**비활성화 시 동작**:
- 월렛 연결 UI 숨김
- 항상 T0 (기본 Tier)
- 수수료 할인 0%
- 저작료 기본 10%만 적용
- 오프체인 DB만 사용

**PRD 수정 필요 섹션**:
- 1.6 차별점 → 오픈소스 배려 추가

### 2.5 환경별 설정 차이

| 구분 | 개발 서버 | 운영 서버 |
|------|-----------|-----------|
| **블록체인** | Testnet | Mainnet |
| **가입** | 승인제 (MANUAL_APPROVAL) | 공개 (PUBLIC) |
| **거래 모드** | 시뮬레이션 (PAPER_TRADING) | 실거래 (LIVE_TRADING) |

**PRD 수정 필요 섹션**:
- 4. 인증 및 권한 → 환경별 가입 프로세스 추가

---

## 3. PRD 수정 사항

### 3.1 1. 제품 개요

```markdown
### 1.5 해결책 (수정)
- **자연어 기반 전략 생성**: LLM과 협력하여 코딩 없이 자연어(프롬프트)로 전략 생성
- **노드-엣지 에디터**: 직관적인 시각적 인터페이스로 복잡한 로직 구성
- **온체인 검증**: 백테스트 결과, 실행 내역을 블록체인에 기록 (선택적)
- **오프체인 정산**: 크레딧 기반 간편 결제 시스템
- **하이브리드 아키텍처**: 온체인(선택) + 오프체인(기본) 유연 운용
- **템플릿 마켓플레이스**: 성공적인 전략을 공유하고 복제할 수 있는 개방형 생태계
```

### 3.2 2. 핵심 기능 (관리자 기능 추가)

```markdown
### 2.5 관리자 기능
- **사용자 관리**: 가입 승인(개발 서버), 활성/비활성, 권한 관리
- **전략 검토**: 검토 대기 목록, 승인/거절, 비공개 처리
- **크레딧 관리**: 충전, 환불, 거래 내역 조회
- **저작권료 정산**: 월별 집계, 크레딧 지급 처리
- **시스템 모니터링**: 상태 확인, 사용자/거래/수익 통계
- 상세: [docs/08-admin/index.md](docs/08-admin/index.md)
```

### 3.3 2.4 탈중앵화 (수정)

```markdown
### 2.4 탈중앙화 및 결제 시스템 (수정)
- **기본 모드**: 오프체인 크레딧 기반 결제
  - 백테스트, 전략 실행, 템플릿 복제 비용을 크레딧으로 결제
  - 크레딧 충전 후 사용 (선결제)
  - 저작권료는 크레딧으로 지급 (월별 정산)

- **선택적 온체인** (BLOCKCHAIN_ENABLED=true):
  - Monad L1 블록체인에 데이터 기록
  - G8D 토큰 스테이킹으로 Tier 혜택
  - USDT0로 추가 결제 옵션

- **블록체인 비활성화 모드**:
  - 로컬 개발, 오픈소스 배포 시 블록체인 없이 전체 기능 사용 가능
  - 환경 변수 `BLOCKCHAIN_ENABLED=false`로 설정

- 상세:
  - [docs/05-blockchain/index.md](docs/05-blockchain/index.md)
  - [docs/05-blockchain/specs/settlement-system.md](docs/05-blockchain/specs/settlement-system.md)
```

### 3.4 1.6 차별점 (오픈소스 배려 추가)

```markdown
### 1.6 차별점 (수정)
| 구분 | 기존 솔루션 | gr8diy-web |
|------|-----------|------------|
| **진입장벽** | 코딩 필수 | 자연어/노드 에디터 (No-Code) |
| **개방성** | 폐쇄적 플랫폼 | 100% 오픈소스 (MIT License) |
| **검증** | 센트럴리즘 | 탈중앙화 (블록체인 온체인) |
| **생태계** | 단방향 | 양방향 (생산자+소비자) |
| **배포** | 상용 SaaS | 셀프호스팅 가능 (블록체인 비활성화 모드) |
```

---

## 4. 데이터 모델 변경사항

### 4.1 추가 테이블 (06-data)

| 테이블 | 설명 |
|--------|------|
| **wallets** | 사용자 월렛 주소 |
| **follows** | 팔로우 관계 |
| **staking_records** | G8D 스테이킹 기록 |
| **strategy_registrations** | 전략 온체인 등록 |
| **settlements** | 오프체인 정산 내역 |
| **author_royalties** | 월별 저작권료 정산 |

**PRD 수정 필요**: 새로운 데이터 모델 섹션 추가 또는 기존 섹션 업데이트

---

## 5. 문서화 로드맵 업데이트

### 5.1 완료된 섹션

- ✅ Phase 1: PRD, 01-overview, 06-data
- ✅ Phase 2: 02-authentication (5/5)
- ✅ Phase 2: 03-strategy (5/5)
- ✅ Phase 2: 04-backtesting (6/6)
- ✅ Phase 3: 05-blockchain (10/10) ← **신규**
- ✅ Phase 3: 08-admin (5/5) ← **신규**

### 5.2 Phase 4: PRD 최종 수정

- PRD.md에 위 변경사항 반영
- docs/_planning/documentation-roadmap.md 업데이트

---

## 6. 확인 필요 사항

### 6.1 사용자 확인 요청

**질문 1**: PRD 수정 사항이 모두 반영되었나요?

**질문 2**: 추가로 수정하거나 보완할 내용이 있나요?

**질문 3**: 07-backend-frontend 연동 문서는 별도로 작성할까요, 아니면 기존 문서들로 충분한가요?

---

*작성일: 2025-12-29*
